{% extends "main/index.html" %}
{% load static %}

{% block title %}Classroom{% endblock %}

{% block content %}
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-custom justify-content-between">
    <div class="back-button mb-3 mt-2">
        <a href="{% url 'index' %}" class="btn btn-warning btn-lg">Back</a>
    </div>
    <div class="d-flex flex-grow-1 justify-content-between align-items-center">
        <a class="navbar-brand ml-5" style="flex-shrink: 0;">CLASSROOMS</a>
    </div>
</nav>

<!-- Main Content -->
<div class="container mt-5">
    <div class="card p-4 shadow-sm">
        <h2 class="text-center">Dynamic Classroom Viewer</h2>
        <p class="text-muted text-center">Click on a room to view more details about its schedule.</p>
        <p class="text-muted text-center">
            <strong>Legend:</strong>
            <span class="text-danger fw-bold">Red</span> = Occupied,
            <span class="text-success fw-bold">Green</span> = Unoccupied
        </p>

        <!-- Room Buttons -->
        <div id="rooms-container" class="row mt-4">
            {% for room in rooms %}
            <div class="col-md-4 mb-3">
                <button 
                    class="btn w-100 room-button btn-primary" 
                    data-room-id="{{ room.id }}" 
                    data-room-name="{{ room.name }}">
                    {{ room.name }}
                </button>
            </div>
            {% empty %}
            <p class="text-center text-muted w-100">NO CLASSROOMS AVAILABLE</p>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Modals -->
<!-- Room Modal -->
<div class="modal" style="margin-top: 12rem;" id="roomModal" tabindex="-1" aria-labelledby="roomModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="roomModalLabel">Schedule for <span id="roomName"></span></h5>
            </div>
            <div class="modal-body">
                <!-- Regular Schedule Section -->
                <h5>Regular Schedule</h5>
                <div id="regularScheduleContainer" class="mb-3">
                    <!-- Regular schedule items will be dynamically added here -->
                </div>

                <!-- Temporary Schedule Section -->
                <h5>Temporary Schedule</h5>
                <div id="temporaryScheduleContainer" class="mb-3">
                    <!-- Temporary schedule items will be dynamically added here -->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- CSS and JS -->
<link href="{% static 'css/classroom.css' %}" rel="stylesheet">
<script src="{% static 'js/classroom.js' %}"></script>
{% endblock %}
